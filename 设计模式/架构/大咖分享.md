# 如何写复杂业务的代码

## 原则

代码是对业务语义的表达

缺失了模型，以及模型之间的关系。脱离模型的业务表达，是缺少韵律和灵魂的。

通过对象的多态可以消除代码中的大部分 if-else

对象模型更加清晰的还原了业务语义，同时，多态也消除了原来的 if-else 判断。



## 方法

过程分解+对象模型

### 详解

自上而下的结构化解+自上而下的面向对象分析

### 上下结合

​		自上而下的过程分解和自下而上的对象建模



上面的分析可以帮助我们更好的理清模型之间的关系，而下面的模型表达可以提升代码的复用度和业务语义表达能力。

### 能力下沉

#### 阶段

##### 套概念阶段

了解一些 DDD 的概念，然后在代码中“使用” Aggregation Root、Bounded Context、Repository等等这些概念，而进一步也会使用 一定的分层策略。

##### 融会贯通阶段

理解DDD的本质是统一语言、边界划分和面向对象分析的方法。

#### 概念

能力下沉，是指我们不强求一次就能设计出Domain 的能力，也不需要强制要求把所有的业务功能都放到Domain层，而是采用实用主义的态度，即只对那些需要在多个场景中需要被复用的能力进行抽象下沉，而不需要复用的，就暂时放在App层的 use case（响应一个 request 的处理过程）里就好了。



循序渐进的能力下沉策略，应该是一种更符合实际、更敏捷的方法。因为我们承认模型不是一次性设计出来的，而是迭代演化出来的。

![](.\..\png\能力下沉.png)

##### 复用性

什么时候下沉（when）

##### 内聚性

要下沉到哪里（how）

##### Domain service

相对比较粗的粒度。

##### Domain

Domain的Model这个是最细粒度的复用。

## 建议

夯实自己的基础技术能力、OO能力、建模能力....不断提升抽象思维、结构化思维、思辨思维....持续学习精进，写好代码。